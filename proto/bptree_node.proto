syntax = "proto3";
package bptree;

message HeaderProto {
    bool is_leaf = 1;
    int32 size = 2; // 当前键的数量
    int32 max_size = 3;
}

message LeafNodeProto {
    HeaderProto header = 1;
    repeated int32 keys = 2; // 假设Key是int
    repeated uint64 values = 3; // 假设Value是uint64
    int32 next_page_id = 4;
}

message InternalNodeProto {
    HeaderProto header = 1;
    repeated int32 keys = 2;
    repeated int32 children = 3; // 存储 page_id_t
}

message PagePayloadProto {
    oneof payload {
        LeafNodeProto leaf_node = 1;
        InternalNodeProto internal_node = 2;
    }
}